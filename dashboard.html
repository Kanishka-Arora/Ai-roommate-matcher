<!DOCTYPE html>
<html>
<head>
  <title>Dashboard</title>
  <link rel="stylesheet" href="dashboard.css">
  <script src="dashboard.js" defer></script> 
</head>
<body>

  <!-- Logout Link -->
  <h3 style="cursor:pointer; color:red;" onclick="logout()">Logout</h3>

  <!-- Voice Input Form -->
  <form id="voiceForm">
    <textarea rows="8" cols="60" name="voiceInput" placeholder="Speak something using the mic..." required id="prompt"></textarea>
    <br><br>
    <button type="button" id="micBtn">ðŸŽ¤ Mic</button>
    <button type="submit" id="submitBtn" onclick="getResponse()">Submit</button>
    <h2 id="header">Response by Helper AI</h2>
    <p id="response"></p>
  </form>

  <!-- Contact Card -->
  <h2>Contact Card</h2>
  <div id="contactCard">
    <p><strong>Name:</strong></p>
    <p><strong>Email:</strong></p>
    <p><strong>Phone No:</strong></p>
  </div>

  <script>
    async function getResponse() {
      const prompt = document.getElementById('prompt').value;

      if (!prompt) {
        alert("Please enter a prompt");
        return;
      }

      try {
        // Send the prompt to the Python Flask backend
        const res = await fetch('http://127.0.0.1:5000/get_response', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ prompt: prompt })
        });

        const data = await res.json();

        if (data.response) {
          document.getElementById('header').textContent = "Response by Helper AI";
          document.getElementById('response').textContent = data.response;
        } else {
          document.getElementById('response').textContent = `Error: ${data.error}`;
        }
      } catch (error) {
        console.error("Error:", error);
        alert("An error occurred while fetching the response.");
      }
    }
  </script>
</body>
</html>